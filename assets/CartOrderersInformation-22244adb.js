import{P as S}from"./PurchaseStepper-162859b1.js";import{F as C}from"./FullPageLoading-207f16b0.js";import{m as T,g as A,_ as P,r as l,o as c,c as m,b as o,w as b,a as e,n as _,D as E,E as M,F as f,i as R,t as i,d as u,h as y}from"./index-bd691426.js";import{c as w}from"./cartAndWishList-791b78d5.js";import{S as $}from"./sweetalert2.all-fc258a9c.js";import{T as N}from"./index-38ad52a9.js";import{c as O,l as D,s as I,d as v,E as z,z as U,F as B,a as q,r as W,e as j}from"./zh_TW-9042b1df.js";O({generateMessage:D({zh_TW:U}),validateOnInput:!0});I("zh_TW");const H=B,G=q;v("required",W);v("email",j);v("isPhone",s=>/^(09)[0-9]{8}$/.test(s)?!0:"請輸入正確的手機號碼格式");const{VITE_APP_URL:J,VITE_APP_PATH:K}={VITE_APP_URL:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"peihanwang-hexschool",BASE_URL:"/Fangsis/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},Q={data(){return{isLoading:!1,name:"",email:"",tel:"",address:"",message:""}},components:{FullPageLoading:C,VField:H,VForm:G,ErrorMessage:z},methods:{createOrder(){this.isLoading=!0;const s={user:{name:this.name,email:this.email,tel:this.tel,address:this.address},message:this.message};this.$http.post(`${J}/v2/api/${K}/order`,{data:s}).then(t=>{this.isLoading=!1,N.fire({icon:"success",title:"訂單建立成功!"}),localStorage.removeItem("localStorageCouponCodeMessage"),this.getCart(),this.$router.push(`OrderPay/${t.data.orderId}`)}).catch(()=>{this.isLoading=!1,$.fire({title:"訂單建立失敗",text:"請確認您目前的網路連線狀況並再次嘗試",icon:"error",confirmButtonText:"確定",confirmButtonColor:"#5D7067",customClass:{title:"titleFontStyle",popup:"radius0",confirmButton:"radius0"}})})},...T(w,["getCart"])},computed:{...A(w,["carts","total","final_total","delivery","couponCodeMessage"])}},X={class:"row mt-2 gy-3"},Y={class:"col-lg-8"},Z={class:"border border-2 border-secondary px-5 py-5"},ee=e("div",{class:"border border-1 border-secondary border-top-0 border-end-0 border-start-0 w-100 mb-5 d-flex"},[e("h2",{class:"fs-4 fw-bold"},"填寫訂購人資訊")],-1),se={class:"mb-4"},oe=e("label",{for:"PurchaserName",class:"form-label"},"姓名 / Name",-1),te={class:"mb-4"},re=e("label",{for:"PurchaserPhoneNumber",class:"form-label"},"手機號碼 / Phone Number",-1),ae={class:"mb-4"},le=e("label",{for:"PurchaserEmail",class:"form-label"},"電子郵件 / Email Address",-1),de={class:"mb-4"},ne=e("label",{for:"PurchaserAddress",class:"form-label"},"收件地址 / Recipient's Address",-1),ie={class:"mb-4"},ce=e("label",{for:"PurchaserOrderRemark",class:"form-label"},"訂單備註 / Order Remark",-1),me={class:"col-lg-4"},ue={class:"border border-2 border-secondary px-5 py-5 d-flex flex-column"},he={class:"mb-6"},_e=e("div",{class:"border border-1 border-secondary border-top-0 border-end-0 border-start-0 w-100 mb-3"},[e("h2",{class:"fs-5 fw-bold"},"您的訂單")],-1),pe={class:"table"},be=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"商品名稱"),e("th",{class:"text-end text-nowrap",scope:"col"},"數量")])],-1),fe={class:"fw-lighter",scope:"row"},ve={class:"fw-lighter text-end"},ge={class:"border border-1 border-secondary border-top-0 border-end-0 border-start-0 w-100 mb-11 d-flex justify-content-between align-items-end"},ye=e("h3",{class:"fs-6 text-nowrap"},"小計",-1),we={class:"fw-bold fs-4 me-1"},Pe={class:"mb-8"},ke=e("div",{class:"border border-1 border-secondary border-top-0 border-end-0 border-start-0 w-100 mb-3 d-flex"},[e("h3",{class:"fs-6 fw-bold"},"配送方式")],-1),Ve={class:"form-check"},xe=["checked"],Fe=e("label",{class:"form-check-label",for:"DeliveryMethod02"}," 順豐速遞 - 常溫配送 ",-1),Le={class:"form-check"},Se=["checked"],Ce=e("label",{class:"form-check-label",for:"DeliveryMethod01"}," 7-11 取貨",-1),Te={class:"border border-1 border-secondary border-top-0 border-end-0 border-start-0 w-100 mb-3 d-flex justify-content-between align-items-end"},Ae=e("h3",{class:"fs-6 text-nowrap fw-bold"},"總計",-1),Ee={class:"d-flex flex-column"},Me={key:0,class:"fw-bold fs-4 opacity-25 text-decoration-line-through me-1"},Re={class:"fw-bold fs-4 me-1"},$e={key:0,class:"fs-6 text-end"},Ne={class:"row mt-5 mb-8 gx-2"},Oe={class:"col-6"},De={class:"col-6"},Ie=["disabled"];function ze(s,t,k,V,r,g){const d=l("VField"),n=l("ErrorMessage"),p=l("RouterLink"),x=l("VForm"),F=l("FullPageLoading");return c(),m(f,null,[o(x,{onSubmit:g.createOrder},{default:b(({meta:L,errors:h})=>[e("div",X,[e("div",Y,[e("div",Z,[ee,e("div",se,[oe,o(d,{class:_(["form-control",{"is-invalid":h.訂購人姓名}]),id:"PurchaserName",type:"text",name:"訂購人姓名",rules:"required",placeholder:"請輸入您的姓名",modelValue:r.name,"onUpdate:modelValue":t[0]||(t[0]=a=>r.name=a)},null,8,["class","modelValue"]),o(n,{class:"invalid-feedback ms-1",name:"訂購人姓名"})]),e("div",te,[re,o(d,{class:_(["form-control",{"is-invalid":h.手機電話號碼}]),id:"PurchaserPhoneNumber",type:"tel",name:"手機電話號碼",rules:"isPhone",placeholder:"請輸入您的手機電話號碼",oninput:"value=value.replace(/[^\\d]/g,'')",modelValue:r.tel,"onUpdate:modelValue":t[1]||(t[1]=a=>r.tel=a)},null,8,["class","modelValue"]),o(n,{class:"invalid-feedback ms-1",name:"手機電話號碼"})]),e("div",ae,[le,o(d,{class:_(["form-control",{"is-invalid":h.email}]),id:"PurchaserEmail",type:"email",name:"email",rules:"required|email",placeholder:"請輸入您的電子郵件地址",modelValue:r.email,"onUpdate:modelValue":t[2]||(t[2]=a=>r.email=a)},null,8,["class","modelValue"]),o(n,{class:"invalid-feedback ms-1",name:"email"})]),e("div",de,[ne,o(d,{class:_(["form-control",{"is-invalid":h.收件地址}]),id:"PurchaserAddress",type:"text",name:"收件地址",rules:"required",placeholder:"請填寫配送位址，在此輸入您方便接受商品配送的地址",modelValue:r.address,"onUpdate:modelValue":t[3]||(t[3]=a=>r.address=a)},null,8,["class","modelValue"]),o(n,{class:"invalid-feedback ms-1",name:"收件地址"})]),e("div",ie,[ce,E(e("textarea",{class:"form-control",id:"PurchaserOrderRemark",name:"PurchaserOrderRemark",cols:"40",rows:"10",maxlength:"300",placeholder:"若您有任何的需要，可以在備註欄位中留下您對訂單的需求",style:{resize:"none"},"onUpdate:modelValue":t[4]||(t[4]=a=>r.message=a)},null,512),[[M,r.message]])])])]),e("div",me,[e("div",ue,[e("div",he,[_e,e("table",pe,[be,e("tbody",null,[(c(!0),m(f,null,R(s.carts,a=>(c(),m("tr",{key:a.id},[e("th",fe,i(a.product.title),1),e("td",ve,i(a.qty),1)]))),128))])])]),e("div",ge,[ye,e("span",we,[u("NT$ "),e("span",null,i(s.total),1)])]),e("div",Pe,[ke,e("div",Ve,[e("input",{class:"form-check-input",id:"DeliveryMethod02",type:"radio",name:"DeliveryMethod",checked:s.delivery==="順豐速遞 - 常溫配送",disabled:""},null,8,xe),Fe]),e("div",Le,[e("input",{class:"form-check-input",id:"DeliveryMethod01",type:"radio",name:"DeliveryMethod",checked:s.delivery==="7-11 取貨",disabled:""},null,8,Se),Ce])]),e("div",Te,[Ae,e("div",Ee,[s.total!==s.final_total?(c(),m("span",Me,[u("NT$ "),e("span",null,i(s.total),1)])):y("",!0),e("span",Re,[u("NT$ "),e("span",null,i(s.final_total),1)])])]),s.total!==s.final_total?(c(),m("span",$e,i(s.couponCodeMessage),1)):y("",!0),e("div",Ne,[e("div",Oe,[o(p,{class:"btn btn-outline-secondary w-100 py-2",to:"CartView"},{default:b(()=>[u("回上一步")]),_:1})]),e("div",De,[e("button",{class:"btn btn-primary w-100 py-2",type:"submit",disabled:s.carts.length===0||!L.valid}," 建立訂單 ",8,Ie)])])])])])]),_:1},8,["onSubmit"]),o(F,{isLoading:r.isLoading},null,8,["isLoading"])],64)}const Ue=P(Q,[["render",ze]]),Be={data(){return{purchaseStepsIsActive:"details"}},components:{PurchaseStepper:S,CartOrderForm:Ue}},qe={class:"py-md-13 py-9 background-position-center background-size-corver",style:{"background-image":"url('https://storage.googleapis.com/vue-course-api.appspot.com/peihanwang-hexschool/1689994205093.jpg')","background-color":"var(--bs-primary)"}},We={class:"container d-flex flex-column align-items-center"},je=e("h2",{class:"fw-bold fs-lg-10 fs-1 mb-3 text-white",style:{"font-family":"var(--bs-NotoSerif-TC)"}}," 訂單明細 ",-1),He={class:"fs-6"},Ge={"aria-label":"breadcrumb"},Je={class:"breadcrumb mb-0 text-white text-center"},Ke={class:"breadcrumb-item"},Qe=e("li",{class:"breadcrumb-item active","aria-current":"page"},"訂單明細",-1),Xe={class:"container mt-5 mt-md-7 mb-10"};function Ye(s,t,k,V,r,g){const d=l("RouterLink"),n=l("PurchaseStepper"),p=l("CartOrderForm");return c(),m(f,null,[e("div",qe,[e("div",We,[je,e("div",He,[e("nav",Ge,[e("ol",Je,[e("li",Ke,[o(d,{class:"text-decoration-none text-white",to:"/"},{default:b(()=>[u("首頁")]),_:1})]),Qe])])])])]),e("div",Xe,[o(n,{isActive:r.purchaseStepsIsActive},null,8,["isActive"]),o(p)])],64)}const ls=P(Be,[["render",Ye]]);export{ls as default};

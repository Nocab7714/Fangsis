import{P as w}from"./PurchaseSteps-0f3918a2.js";import{F as P}from"./FullPageLoading-23a12f0a.js";import{m as C,g as S,_ as v,r as n,o as m,c as _,a as e,d as r,t as a,n as L,h as T,b as i,F as y,w as A}from"./index-9624272a.js";import{T as $,c as u}from"./cartAndWishList-716d0e5e.js";import{S as b}from"./sweetalert2.all-ef37b4bb.js";import"./index-c6e81e94.js";const{VITE_APP_URL:f,VITE_APP_PATH:g}={VITE_APP_URL:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"peihanwang-hexschool",BASE_URL:"/Fangsis/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},B={data(){return{order:{},orderCreateTime:"",address:"",email:"",name:"",tel:"",isLoading:!1}},components:{FullPageLoading:P},methods:{orderPay(){this.isLoading=!0;const{id:o}=this.$route.params;this.$http.post(`${f}/v2/api/${g}/pay/${o}`).then(t=>{$.fire({icon:"success",title:"付款成功!"}),this.$router.push(`/CartCompleteOrder/${o}`),this.isLoading=!1}).catch(t=>{b.fire({title:"付款失敗",text:"請確認您目前的網路連線狀況並再次嘗試",icon:"error",confirmButtonText:"確定",confirmButtonColor:"#5D7067"}),console.log(t),this.isLoading=!1})},...C(u,["paymentMethod","paymentReset"])},mounted(){const{id:o}=this.$route.params;this.$http.get(`${f}/v2/api/${g}/order/${o}`).then(t=>{this.order=t.data.order;const c=t.data.order.create_at,l=new Date(c);this.orderCreateTime=l,this.address=this.order.user.address,this.email=this.order.user.email,this.name=this.order.user.name,this.tel=this.order.user.tel,this.order.is_paid===!0&&b.fire({title:"訂單付款已成功",text:"若要查詢訂單資訊請透過「訂單查詢系統」，謝謝! ",icon:"warning",confirmButtonText:"確定",confirmButtonColor:"#5D7067"}).then(s=>{s.isConfirmed&&this.$router.push("/OrderSearch")})}).catch(t=>{alert(t)}),this.paymentReset()},computed:{...S(u,["total","payment"])}},k={class:"row gy-3"},D={class:"col-lg-8"},V={class:"border border-2 border-secondary px-5 py-5"},O=e("div",{class:"border border-1 border-secondary border-top-0 border-end-0 border-start-0 w-100 mb-5 d-flex"},[e("h2",{class:"fs-4 fw-bold"},"您的訂單資訊")],-1),R={class:"ms-2"},F={class:"ms-2"},N=e("div",{class:"border border-1 border-secondary border-top-0 border-end-0 border-start-0 w-100 mb-5 d-flex"},null,-1),E={class:"ms-2"},I={class:"ms-2"},M={class:"ms-2"},z={class:"text-break"},Z=e("span",{class:"mb-5"},"訂單備註",-1),H={class:"col-lg-4"},U={class:"border border-2 border-secondary px-5 py-5 d-flex flex-column"},X=e("div",{class:"mb-10"},[e("div",{class:"border border-1 border-secondary border-top-0 border-end-0 border-start-0 w-100 mb-3 d-flex"},[e("h3",{class:"fs-6 fw-bold"},"訂單狀態")]),e("p",null,"訂單已成功建立，請確認您的訂單資訊是否正確，並且於下方選擇訂單付款方式進行付款。")],-1),j={class:"mb-8"},G=e("div",{class:"border border-1 border-secondary border-top-0 border-end-0 border-start-0 w-100 mb-3 d-flex"},[e("h3",{class:"fs-6 fw-bold"},"請選擇付款方式")],-1),Q=["disabled"],W=["selected"],Y=["selected"],q=["selected"],K={class:"border border-1 border-secondary border-top-0 border-end-0 border-start-0 w-100 mb-3 d-flex justify-content-between align-items-end"},J=e("h3",{class:"fs-6 text-nowrap"},"付款金額",-1),ee={class:"d-flex flex-column"},se={class:"fw-bold fs-4 fst-italic"},te={class:"mt-2 mb-8 d-flex justify-content-end"},oe=["disabled"],re={key:0,class:"spinner-border-sm spinner-border",role:"status","aria-hidden":"true"};function ae(o,t,c,l,s,h){const p=n("FullPageLoading");return m(),_(y,null,[e("div",k,[e("div",D,[e("div",V,[O,e("p",null,[r(" 訂單編號 : "),e("span",R,a(s.order.id),1)]),e("p",null,[r(" 付款狀態 : "),e("span",{class:L(["ms-2",{"text-danger":s.order.is_paid===!1}])},a(s.order.is_paid?"已付款":"尚未付款"),3)]),e("p",null,[r(" 訂單建立時間 : "),e("span",F,a(s.orderCreateTime),1)]),N,e("p",null,[r(" 手機號碼 : "),e("span",E,a(s.tel),1)]),e("p",null,[r(" 電子郵件 : "),e("span",I,a(s.email),1)]),e("p",null,[r(" 收件地址 : "),e("span",M,a(s.address),1)]),e("p",z,[Z,r(" :"+a(s.order.message),1)])])]),e("div",H,[e("div",U,[X,e("div",j,[G,e("select",{class:"form-select",onChange:t[0]||(t[0]=d=>o.paymentMethod(d.target.value)),disabled:s.order.is_paid===!0},[e("option",{selected:o.payment==="",disabled:""},"請選擇您的付款方式",8,W),e("option",{selected:o.payment==="信用卡付款",value:"信用卡付款"},"信用卡付款",8,Y),e("option",{selected:o.payment==="ATM 轉帳或匯款",value:"ATM 轉帳或匯款"}," ATM 轉帳或匯款 ",8,q)],40,Q)]),e("div",K,[J,e("div",ee,[e("span",se,[r("NT$ "),e("span",null,a(s.order.total),1)])])]),e("div",te,[e("button",{class:"btn btn-primary w-md-50 w-100",type:"button",onClick:t[1]||(t[1]=d=>h.orderPay()),disabled:o.payment===""||s.order.is_paid===!0},[s.isLoading===!0?(m(),_("span",re)):T("",!0),r(" 進行付款 ")],8,oe)])])])]),i(p,{isLoading:s.isLoading},null,8,["isLoading"])],64)}const de=v(B,[["render",ae]]),ne={data(){return{purchaseStepsIsActive:"details"}},components:{PurchaseSteps:w,CartOrderPay:de}},ie={class:"py-md-13 py-9 background-position-center background-size-corver",style:{"background-image":"url('https://storage.googleapis.com/vue-course-api.appspot.com/peihanwang-hexschool/1689994205093.jpg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=RLJFHdzxV1ZFvcHobhOCdJFG71iTXspxuTuLv3LAuadLgMdzvO3ebfDIxgaswSy6G8SbPxVDbqyApt2wU2it78WeORuUUxdwMwTXV4qzswD20QiHhMvd3AZgGH6OcmLl%2BSP1YQilwzCQZlKgSckbe6LYnCKT2E7vj3iO9qTAsfoXM3FYNRfGl4p3Z11%2BRPSu5PDI5Wjg%2BSnmgeYzn3LLZfqyWN%2BHKVesfnxsDx4s6CkU%2ByX97aX4%2FIZiE89I6SwCw4DvMsNctfvaurRt6YyJKQ3NAB%2BBkmC1pBr0ARDd8C%2BWkxQXNVbaVkvu9PdgirS2CneyZtgonvceaSs5mSNnZA%3D%3D')","background-color":"var(--bs-primary)"}},ce={class:"container d-flex flex-column align-items-center"},le=e("h2",{class:"fw-bold fs-lg-10 fs-1 mb-3 text-white",style:{"font-family":"var(--bs-NotoSerif-TC)"}}," 訂單明細 ",-1),pe={class:"fs-6"},me={"aria-label":"breadcrumb"},_e={class:"breadcrumb mb-0 text-white text-center"},he={class:"breadcrumb-item"},ue=e("li",{class:"breadcrumb-item active","aria-current":"page"},"訂單明細",-1),be={class:"container mt-5 mt-md-7 mb-10"},fe={class:"container"},ge={class:"mt-4"};function ve(o,t,c,l,s,h){const p=n("routerLink"),d=n("PurchaseSteps"),x=n("CartOrderPay");return m(),_(y,null,[e("div",ie,[e("div",ce,[le,e("div",pe,[e("nav",me,[e("ol",_e,[e("li",he,[i(p,{class:"text-decoration-none text-white",to:"/"},{default:A(()=>[r("首頁")]),_:1})]),ue])])])])]),e("div",be,[e("div",fe,[i(d,{isActive:s.purchaseStepsIsActive},null,8,["isActive"])]),e("div",ge,[i(x)])])],64)}const Le=v(ne,[["render",ve]]);export{Le as default};

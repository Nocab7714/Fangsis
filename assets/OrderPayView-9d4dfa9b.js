import{P as w}from"./PurchaseStepper-162859b1.js";import{F as P}from"./FullPageLoading-207f16b0.js";import{m as C,g as T,_ as g,r as a,o as _,c as u,a as e,d as o,t as d,n as L,h as $,b as i,F as v,w as S}from"./index-bd691426.js";import{c as h}from"./cartAndWishList-791b78d5.js";import{S as b}from"./sweetalert2.all-fc258a9c.js";import{T as A}from"./index-38ad52a9.js";const{VITE_APP_URL:f,VITE_APP_PATH:y}={VITE_APP_URL:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"peihanwang-hexschool",BASE_URL:"/Fangsis/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},k={data(){return{order:{},orderCreateTime:"",address:"",email:"",name:"",tel:"",isLoading:!1}},components:{FullPageLoading:P},methods:{orderPay(){this.isLoading=!0;const{id:t}=this.$route.params;this.$http.post(`${f}/v2/api/${y}/pay/${t}`).then(()=>{A.fire({icon:"success",title:"付款成功!"}),this.$router.push(`/CartCompleteOrder/${t}`),this.isLoading=!1}).catch(()=>{b.fire({title:"付款失敗",text:"請確認您目前的網路連線狀況並再次嘗試",icon:"error",confirmButtonText:"確定",confirmButtonColor:"#5D7067",customClass:{title:"titleFontStyle",popup:"radius0",confirmButton:"radius0"}}),this.isLoading=!1})},...C(h,["paymentMethod","paymentReset"])},mounted(){const{id:t}=this.$route.params;this.$http.get(`${f}/v2/api/${y}/order/${t}`).then(r=>{this.order=r.data.order;const c=r.data.order.create_at,l=new Date(c*1e3).toLocaleString();this.orderCreateTime=l,this.address=this.order.user.address,this.email=this.order.user.email,this.name=this.order.user.name,this.tel=this.order.user.tel,this.order.is_paid===!0&&b.fire({title:"訂單付款已成功",text:"訂單處理中，如有任何問題歡迎與我們聯繫!!",icon:"success",confirmButtonText:"確定",confirmButtonColor:"#5D7067",customClass:{title:"titleFontStyle",popup:"radius0",confirmButton:"radius0"}}).then(s=>{s.isConfirmed&&this.$router.push("/")})}).catch(()=>{}),this.paymentReset()},computed:{...T(h,["total","payment"])}},B={class:"row gy-3"},V={class:"col-lg-8"},F={class:"border border-2 border-secondary px-5 py-5"},R=e("div",{class:"border border-1 border-secondary border-top-0 border-end-0 border-start-0 w-100 mb-5 d-flex"},[e("h2",{class:"fs-4 fw-bold"},"您的訂單資訊")],-1),E={class:"ms-2"},D={class:"ms-2"},O=e("div",{class:"border border-1 border-secondary border-top-0 border-end-0 border-start-0 w-100 mb-5 d-flex"},null,-1),I={class:"ms-2"},M={class:"ms-2"},N={class:"ms-2"},j=e("br",null,null,-1),U={class:"col-lg-4"},z={class:"border border-2 border-secondary px-5 py-5 d-flex flex-column"},H=e("div",{class:"mb-10"},[e("div",{class:"border border-1 border-secondary border-top-0 border-end-0 border-start-0 w-100 mb-3 d-flex"},[e("h3",{class:"fs-6 fw-bold"},"訂單狀態")]),e("p",null,"訂單已成功建立，請確認您的訂單資訊是否正確，並且於下方選擇訂單付款方式進行付款。")],-1),W={class:"mb-8"},q=e("div",{class:"border border-1 border-secondary border-top-0 border-end-0 border-start-0 w-100 mb-3 d-flex"},[e("h3",{class:"fs-6 fw-bold"},"請選擇付款方式")],-1),G=["disabled"],J=["selected"],K=["selected"],Q=["selected"],X={class:"border border-1 border-secondary border-top-0 border-end-0 border-start-0 w-100 mb-3 d-flex justify-content-between align-items-end"},Y=e("h3",{class:"fs-6 text-nowrap fw-bold"},"付款金額",-1),Z={class:"d-flex flex-column"},ee={class:"fw-bold fs-4"},se={class:"mt-2 mb-8 d-flex justify-content-end"},te=["disabled"],oe={key:0,class:"spinner-border-sm spinner-border",role:"status","aria-hidden":"true"};function re(t,r,c,l,s,p){const m=a("FullPageLoading");return _(),u(v,null,[e("div",B,[e("div",V,[e("div",F,[R,e("p",null,[o(" 訂單編號 : "),e("span",E,d(s.order.id),1)]),e("p",null,[o(" 付款狀態 : "),e("span",{class:L(["ms-2",{"text-danger":s.order.is_paid===!1}])},d(s.order.is_paid?"已付款":"尚未付款"),3)]),e("p",null,[o(" 建立時間 : "),e("span",D,d(s.orderCreateTime),1)]),O,e("p",null,[o(" 手機號碼 : "),e("span",I,d(s.tel),1)]),e("p",null,[o(" 電子郵件 : "),e("span",M,d(s.email),1)]),e("p",null,[o(" 收件地址 : "),e("span",N,d(s.address),1)]),e("p",null,[o(" 訂單備註 : "),j,o(" "+d(s.order.message),1)])])]),e("div",U,[e("div",z,[H,e("div",W,[q,e("select",{class:"form-select",onChange:r[0]||(r[0]=n=>t.paymentMethod(n.target.value)),disabled:s.order.is_paid===!0},[e("option",{selected:t.payment==="",disabled:""},"請選擇您的付款方式",8,J),e("option",{selected:t.payment==="信用卡付款",value:"信用卡付款"},"信用卡付款",8,K),e("option",{selected:t.payment==="ATM 轉帳或匯款",value:"ATM 轉帳或匯款"}," ATM 轉帳或匯款 ",8,Q)],40,G)]),e("div",X,[Y,e("div",Z,[e("span",ee,[o("NT$ "),e("span",null,d(s.order.total),1)])])]),e("div",se,[e("button",{class:"btn btn-primary w-md-50 w-100 py-2",type:"button",onClick:r[1]||(r[1]=(...n)=>p.orderPay&&p.orderPay(...n)),disabled:t.payment===""||s.order.is_paid===!0},[s.isLoading===!0?(_(),u("span",oe)):$("",!0),o(" 進行付款 ")],8,te)])])])]),i(m,{isLoading:s.isLoading},null,8,["isLoading"])],64)}const de=g(k,[["render",re]]),ne={data(){return{purchaseStepsIsActive:"pay"}},components:{PurchaseStepper:w,CartOrderPay:de}},ae={class:"py-md-13 py-9 background-position-center background-size-corver",style:{"background-image":"url('https://storage.googleapis.com/vue-course-api.appspot.com/peihanwang-hexschool/1689994205093.jpg')","background-color":"var(--bs-primary)"}},ie={class:"container d-flex flex-column align-items-center"},ce=e("h2",{class:"fw-bold fs-lg-10 fs-1 mb-3 text-white",style:{"font-family":"var(--bs-NotoSerif-TC)"}}," 訂單付款 ",-1),le={class:"fs-6"},pe={"aria-label":"breadcrumb"},me={class:"breadcrumb mb-0 text-white text-center"},_e={class:"breadcrumb-item"},ue=e("li",{class:"breadcrumb-item active","aria-current":"page"},"訂單付款",-1),he={class:"container mt-5 mt-md-7 mb-10"},be={class:"mt-4"};function fe(t,r,c,l,s,p){const m=a("RouterLink"),n=a("PurchaseStepper"),x=a("CartOrderPay");return _(),u(v,null,[e("div",ae,[e("div",ie,[ce,e("div",le,[e("nav",pe,[e("ol",me,[e("li",_e,[i(m,{class:"text-decoration-none text-white",to:"/"},{default:S(()=>[o("首頁")]),_:1})]),ue])])])])]),e("div",he,[i(n,{isActive:s.purchaseStepsIsActive},null,8,["isActive"]),e("div",be,[i(x)])])],64)}const Ce=g(ne,[["render",fe]]);export{Ce as default};

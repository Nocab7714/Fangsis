import{P as w}from"./PurchaseStepper-31cfc8a8.js";import{F as P}from"./FullPageLoading-2689b8a9.js";import{m as C,g as S,_ as y,r as i,o as u,c as _,a as e,d as o,t as d,n as L,h as T,b as a,F as v,w as A}from"./index-fc8d9e33.js";import{c as h}from"./cartAndWishList-89d7d8fd.js";import{S as b}from"./sweetalert2.all-4f24a9ab.js";import{T as B}from"./index-a8802e03.js";const{VITE_APP_URL:f,VITE_APP_PATH:g}={VITE_APP_URL:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"peihanwang-hexschool",BASE_URL:"/Fangsis/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},$={data(){return{order:{},orderCreateTime:"",address:"",email:"",name:"",tel:"",isLoading:!1}},components:{FullPageLoading:P},methods:{orderPay(){this.isLoading=!0;const{id:t}=this.$route.params;this.$http.post(`${f}/v2/api/${g}/pay/${t}`).then(()=>{B.fire({icon:"success",title:"付款成功!"}),this.$router.push(`/CartCompleteOrder/${t}`),this.isLoading=!1}).catch(()=>{b.fire({title:"付款失敗",text:"請確認您目前的網路連線狀況並再次嘗試",icon:"error",confirmButtonText:"確定",confirmButtonColor:"#5D7067",customClass:{title:"titleFontStyle",popup:"radius0",confirmButton:"radius0"}}),this.isLoading=!1})},...C(h,["paymentMethod","paymentReset"])},mounted(){const{id:t}=this.$route.params;this.$http.get(`${f}/v2/api/${g}/order/${t}`).then(r=>{this.order=r.data.order;const c=r.data.order.create_at,l=new Date(c*1e3).toLocaleString();this.orderCreateTime=l,this.address=this.order.user.address,this.email=this.order.user.email,this.name=this.order.user.name,this.tel=this.order.user.tel,this.order.is_paid===!0&&b.fire({title:"訂單付款已成功",text:"訂單處理中，如有任何問題歡迎與我們聯繫!!",icon:"success",confirmButtonText:"確定",confirmButtonColor:"#5D7067",customClass:{title:"titleFontStyle",popup:"radius0",confirmButton:"radius0"}}).then(s=>{s.isConfirmed&&this.$router.push("/")})}).catch(()=>{}),this.paymentReset()},computed:{...S(h,["total","payment"])}},k={class:"row gy-3"},D={class:"col-lg-8"},V={class:"border border-2 border-secondary px-5 py-5"},R=e("div",{class:"border border-1 border-secondary border-top-0 border-end-0 border-start-0 w-100 mb-5 d-flex"},[e("h2",{class:"fs-4 fw-bold"},"您的訂單資訊")],-1),F={class:"ms-2"},N={class:"ms-2"},O=e("div",{class:"border border-1 border-secondary border-top-0 border-end-0 border-start-0 w-100 mb-5 d-flex"},null,-1),E={class:"ms-2"},I={class:"ms-2"},M={class:"ms-2"},z=e("br",null,null,-1),Z={class:"col-lg-4"},H={class:"border border-2 border-secondary px-5 py-5 d-flex flex-column"},U=e("div",{class:"mb-10"},[e("div",{class:"border border-1 border-secondary border-top-0 border-end-0 border-start-0 w-100 mb-3 d-flex"},[e("h3",{class:"fs-6 fw-bold"},"訂單狀態")]),e("p",null,"訂單已成功建立，請確認您的訂單資訊是否正確，並且於下方選擇訂單付款方式進行付款。")],-1),X={class:"mb-8"},j=e("div",{class:"border border-1 border-secondary border-top-0 border-end-0 border-start-0 w-100 mb-3 d-flex"},[e("h3",{class:"fs-6 fw-bold"},"請選擇付款方式")],-1),G=["disabled"],Q=["selected"],W=["selected"],Y=["selected"],q={class:"border border-1 border-secondary border-top-0 border-end-0 border-start-0 w-100 mb-3 d-flex justify-content-between align-items-end"},K=e("h3",{class:"fs-6 text-nowrap fw-bold"},"付款金額",-1),J={class:"d-flex flex-column"},ee={class:"fw-bold fs-4"},se={class:"mt-2 mb-8 d-flex justify-content-end"},te=["disabled"],oe={key:0,class:"spinner-border-sm spinner-border",role:"status","aria-hidden":"true"};function re(t,r,c,l,s,p){const m=i("FullPageLoading");return u(),_(v,null,[e("div",k,[e("div",D,[e("div",V,[R,e("p",null,[o(" 訂單編號 : "),e("span",F,d(s.order.id),1)]),e("p",null,[o(" 付款狀態 : "),e("span",{class:L(["ms-2",{"text-danger":s.order.is_paid===!1}])},d(s.order.is_paid?"已付款":"尚未付款"),3)]),e("p",null,[o(" 建立時間 : "),e("span",N,d(s.orderCreateTime),1)]),O,e("p",null,[o(" 手機號碼 : "),e("span",E,d(s.tel),1)]),e("p",null,[o(" 電子郵件 : "),e("span",I,d(s.email),1)]),e("p",null,[o(" 收件地址 : "),e("span",M,d(s.address),1)]),e("p",null,[o(" 訂單備註 : "),z,o(" "+d(s.order.message),1)])])]),e("div",Z,[e("div",H,[U,e("div",X,[j,e("select",{class:"form-select",onChange:r[0]||(r[0]=n=>t.paymentMethod(n.target.value)),disabled:s.order.is_paid===!0},[e("option",{selected:t.payment==="",disabled:""},"請選擇您的付款方式",8,Q),e("option",{selected:t.payment==="信用卡付款",value:"信用卡付款"},"信用卡付款",8,W),e("option",{selected:t.payment==="ATM 轉帳或匯款",value:"ATM 轉帳或匯款"}," ATM 轉帳或匯款 ",8,Y)],40,G)]),e("div",q,[K,e("div",J,[e("span",ee,[o("NT$ "),e("span",null,d(s.order.total),1)])])]),e("div",se,[e("button",{class:"btn btn-primary w-md-50 w-100 py-2",type:"button",onClick:r[1]||(r[1]=(...n)=>p.orderPay&&p.orderPay(...n)),disabled:t.payment===""||s.order.is_paid===!0},[s.isLoading===!0?(u(),_("span",oe)):T("",!0),o(" 進行付款 ")],8,te)])])])]),a(m,{isLoading:s.isLoading},null,8,["isLoading"])],64)}const de=y($,[["render",re]]),ne={data(){return{purchaseStepsIsActive:"pay"}},components:{PurchaseStepper:w,CartOrderPay:de}},ie={class:"py-md-13 py-9 background-position-center background-size-corver",style:{"background-image":"url('https://storage.googleapis.com/vue-course-api.appspot.com/peihanwang-hexschool/1689994205093.jpg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=RLJFHdzxV1ZFvcHobhOCdJFG71iTXspxuTuLv3LAuadLgMdzvO3ebfDIxgaswSy6G8SbPxVDbqyApt2wU2it78WeORuUUxdwMwTXV4qzswD20QiHhMvd3AZgGH6OcmLl%2BSP1YQilwzCQZlKgSckbe6LYnCKT2E7vj3iO9qTAsfoXM3FYNRfGl4p3Z11%2BRPSu5PDI5Wjg%2BSnmgeYzn3LLZfqyWN%2BHKVesfnxsDx4s6CkU%2ByX97aX4%2FIZiE89I6SwCw4DvMsNctfvaurRt6YyJKQ3NAB%2BBkmC1pBr0ARDd8C%2BWkxQXNVbaVkvu9PdgirS2CneyZtgonvceaSs5mSNnZA%3D%3D')","background-color":"var(--bs-primary)"}},ae={class:"container d-flex flex-column align-items-center"},ce=e("h2",{class:"fw-bold fs-lg-10 fs-1 mb-3 text-white",style:{"font-family":"var(--bs-NotoSerif-TC)"}}," 訂單付款 ",-1),le={class:"fs-6"},pe={"aria-label":"breadcrumb"},me={class:"breadcrumb mb-0 text-white text-center"},ue={class:"breadcrumb-item"},_e=e("li",{class:"breadcrumb-item active","aria-current":"page"},"訂單付款",-1),he={class:"container mt-5 mt-md-7 mb-10"},be={class:"mt-4"};function fe(t,r,c,l,s,p){const m=i("RouterLink"),n=i("PurchaseStepper"),x=i("CartOrderPay");return u(),_(v,null,[e("div",ie,[e("div",ae,[ce,e("div",le,[e("nav",pe,[e("ol",me,[e("li",ue,[a(m,{class:"text-decoration-none text-white",to:"/"},{default:A(()=>[o("首頁")]),_:1})]),_e])])])])]),e("div",he,[a(n,{isActive:s.purchaseStepsIsActive},null,8,["isActive"]),e("div",be,[a(x)])])],64)}const Ce=y(ne,[["render",fe]]);export{Ce as default};

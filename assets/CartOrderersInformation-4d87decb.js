import{P as A}from"./PurchaseSteps-3ed1c353.js";import{F as C}from"./FullPageLoading-c049f976.js";import{m as L,g as D,_ as w,r as l,o as c,c as m,b as t,w as f,a as e,n as _,D as N,E as T,F as v,i as F,t as i,d as u,h as g}from"./index-fdd8eb78.js";import{T as M,c as y}from"./cartAndWishList-f9704f02.js";import{S as O}from"./sweetalert2.all-bfa78492.js";import"./index-48fae01a.js";const{VITE_APP_URL:E,VITE_APP_PATH:B}={VITE_APP_URL:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"peihanwang-hexschool",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},R={data(){return{isLoading:!1,name:"",email:"",tel:"",address:"",message:""}},components:{FullPageLoading:C},methods:{createOrder(){this.isLoading=!0;const s={user:{name:this.name,email:this.email,tel:this.tel,address:this.address},message:this.message};this.$http.post(`${E}/v2/api/${B}/order`,{data:s}).then(o=>{this.isLoading=!1,M.fire({icon:"success",title:"訂單建立成功!"}),localStorage.removeItem("localStorageCouponCodeMessage"),this.getCart(),this.$router.push(`OrderPay/${o.data.orderId}`)}).catch(o=>{this.isLoading=!1,O.fire({title:"訂單建立失敗",text:"請確認您目前的網路連線狀況並再次嘗試",icon:"error",confirmButtonText:"確定",confirmButtonColor:"#5D7067"})})},isPhone(s){return/^(09)[0-9]{8}$/.test(s)?!0:"請輸入正確的手機號碼格式"},...L(y,["getCart"])},computed:{...D(y,["carts","total","final_total","delivery","couponCodeMessage"])}},$={class:"row mt-4 gy-3"},I={class:"col-lg-8"},U={class:"border border-2 border-secondary px-5 py-5"},z=e("div",{class:"border border-1 border-secondary border-top-0 border-end-0 border-start-0 w-100 mb-5 d-flex"},[e("h2",{class:"fs-4 fw-bold"},"填寫訂購人資訊")],-1),q={class:"mb-4 w-100 w-md-50"},Z=e("label",{for:"PurchaserName",class:"form-label"},"姓名 / Name",-1),H={class:"mb-4"},X=e("label",{for:"PurchaserPhoneNumber",class:"form-label"},"手機號碼 / Phone Number",-1),j={class:"mb-4"},G=e("label",{for:"PurchaserEmail",class:"form-label"},"電子郵件 / Email Address",-1),Q={class:"mb-4"},W=e("label",{for:"PurchaserAddress",class:"form-label"},"收件地址 / Recipient's Address",-1),Y={class:"mb-4"},K=e("label",{for:"PurchaserOrderRemark",class:"form-label"},"訂單備註 / Order Remark",-1),J={class:"col-lg-4"},ee={class:"border border-2 border-secondary px-5 py-5 d-flex flex-column"},se={class:"mb-6"},oe=e("div",{class:"border border-1 border-secondary border-top-0 border-end-0 border-start-0 w-100 mb-3"},[e("h2",{class:"fs-5 fw-bold"},"您的訂單")],-1),te={class:"table"},re=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"商品名稱"),e("th",{class:"text-end text-nowrap",scope:"col"},"數量")])],-1),ae={class:"fw-lighter",scope:"row"},le={class:"fw-lighter text-end"},de={class:"border border-1 border-secondary border-top-0 border-end-0 border-start-0 w-100 mb-11 d-flex justify-content-between align-items-end"},ne=e("h3",{class:"fs-6 text-nowrap"},"小計",-1),ie={class:"fw-bold fs-4 fst-italic me-1"},ce={class:"mb-8"},me=e("div",{class:"border border-1 border-secondary border-top-0 border-end-0 border-start-0 w-100 mb-3 d-flex"},[e("h3",{class:"fs-6 fw-bold"},"配送方式")],-1),ue={class:"form-check"},he=["checked"],_e=e("label",{class:"form-check-label",for:"DeliveryMethod01"}," 7-11 取貨",-1),be={class:"form-check"},pe=["checked"],fe=e("label",{class:"form-check-label",for:"DeliveryMethod02"}," 順豐速遞 - 常溫配送 ",-1),ve={class:"border border-1 border-secondary border-top-0 border-end-0 border-start-0 w-100 mb-3 d-flex justify-content-between align-items-end"},ge=e("h3",{class:"fs-6 text-nowrap"},"總計",-1),ye={class:"d-flex flex-column"},we={key:0,class:"fw-bold fs-4 fst-italic opacity-25 text-decoration-line-through me-1"},Pe={class:"fw-bold fs-4 fst-italic me-1"},xe={key:0,class:"fs-6 text-end"},ke={class:"row mt-5 mb-8 gx-2"},Ve={class:"col-6"},Se={class:"col-6"},Ae=["disabled"];function Ce(s,o,P,x,r,b){const d=l("VField"),n=l("ErrorMessage"),p=l("router-link"),k=l("VForm"),V=l("FullPageLoading");return c(),m(v,null,[t(k,{onSubmit:b.createOrder},{default:f(({meta:S,errors:h})=>[e("div",$,[e("div",I,[e("div",U,[z,e("div",q,[Z,t(d,{class:_(["form-control",{"is-invalid":h.訂購人姓名}]),id:"PurchaserName",type:"text",name:"訂購人姓名",rules:"required",placeholder:"請輸入您的姓名",modelValue:r.name,"onUpdate:modelValue":o[0]||(o[0]=a=>r.name=a)},null,8,["class","modelValue"]),t(n,{class:"invalid-feedback ms-1",name:"訂購人姓名"})]),e("div",H,[X,t(d,{class:_(["form-control",{"is-invalid":h.手機電話號碼}]),id:"PurchaserPhoneNumber",type:"tel",name:"手機電話號碼",rules:b.isPhone,placeholder:"請輸入您的手機電話號碼",oninput:"value=value.replace(/[^\\d]/g,'')",modelValue:r.tel,"onUpdate:modelValue":o[1]||(o[1]=a=>r.tel=a)},null,8,["class","rules","modelValue"]),t(n,{class:"invalid-feedback ms-1",name:"手機電話號碼"})]),e("div",j,[G,t(d,{class:_(["form-control",{"is-invalid":h.email}]),id:"PurchaserEmail",type:"email",name:"email",rules:"required|email",placeholder:"請輸入您的電子郵件地址",modelValue:r.email,"onUpdate:modelValue":o[2]||(o[2]=a=>r.email=a)},null,8,["class","modelValue"]),t(n,{class:"invalid-feedback ms-1",name:"email"})]),e("div",Q,[W,t(d,{class:_(["form-control",{"is-invalid":h.收件地址}]),id:"PurchaserAddress",type:"text",name:"收件地址",rules:"required",placeholder:"請填寫配送位址，在此輸入您方便接受商品配送的地址",modelValue:r.address,"onUpdate:modelValue":o[3]||(o[3]=a=>r.address=a)},null,8,["class","modelValue"]),t(n,{class:"invalid-feedback ms-1",name:"收件地址"})]),e("div",Y,[K,N(e("textarea",{class:"form-control",id:"PurchaserOrderRemark",name:"PurchaserOrderRemark",cols:"40",rows:"10",maxlength:"300",placeholder:"若您有任何的需要，可以在備註欄位中留下您對訂單的需求",style:{resize:"none"},"onUpdate:modelValue":o[4]||(o[4]=a=>r.message=a)},null,512),[[T,r.message]])])])]),e("div",J,[e("div",ee,[e("div",se,[oe,e("table",te,[re,e("tbody",null,[(c(!0),m(v,null,F(s.carts,a=>(c(),m("tr",{key:a.id},[e("th",ae,i(a.product.title),1),e("td",le,i(a.qty),1)]))),128))])])]),e("div",de,[ne,e("span",ie,[u("NT$ "),e("span",null,i(s.total),1)])]),e("div",ce,[me,e("div",ue,[e("input",{class:"form-check-input",id:"DeliveryMethod01",type:"radio",name:"DeliveryMethod",checked:s.delivery==="7-11 取貨",disabled:""},null,8,he),_e]),e("div",be,[e("input",{class:"form-check-input",id:"DeliveryMethod02",type:"radio",name:"DeliveryMethod",checked:s.delivery==="順豐速遞 - 常溫配送",disabled:""},null,8,pe),fe])]),e("div",ve,[ge,e("div",ye,[s.total!==s.final_total?(c(),m("span",we,[u("NT$ "),e("span",null,i(s.total),1)])):g("",!0),e("span",Pe,[u("NT$ "),e("span",null,i(s.final_total),1)])])]),s.total!==s.final_total?(c(),m("span",xe,i(s.couponCodeMessage),1)):g("",!0),e("div",ke,[e("div",Ve,[t(p,{class:"btn btn-outline-secondary w-100",to:"CartView"},{default:f(()=>[u("回上一頁")]),_:1})]),e("div",Se,[e("button",{class:"btn btn-primary w-100",type:"submit",disabled:s.carts.length===0||!S.valid}," 建立訂單 ",8,Ae)])])])])])]),_:1},8,["onSubmit"]),t(V,{isLoading:r.isLoading},null,8,["isLoading"])],64)}const Le=w(R,[["render",Ce]]),De={data(){return{purchaseStepsIsActive:"details"}},components:{PurchaseSteps:A,CartOrderForm:Le}},Ne={class:"py-md-13 py-9 background-position-center background-size-corver",style:{"background-image":"url('https://storage.googleapis.com/vue-course-api.appspot.com/peihanwang-hexschool/1689994205093.jpg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=RLJFHdzxV1ZFvcHobhOCdJFG71iTXspxuTuLv3LAuadLgMdzvO3ebfDIxgaswSy6G8SbPxVDbqyApt2wU2it78WeORuUUxdwMwTXV4qzswD20QiHhMvd3AZgGH6OcmLl%2BSP1YQilwzCQZlKgSckbe6LYnCKT2E7vj3iO9qTAsfoXM3FYNRfGl4p3Z11%2BRPSu5PDI5Wjg%2BSnmgeYzn3LLZfqyWN%2BHKVesfnxsDx4s6CkU%2ByX97aX4%2FIZiE89I6SwCw4DvMsNctfvaurRt6YyJKQ3NAB%2BBkmC1pBr0ARDd8C%2BWkxQXNVbaVkvu9PdgirS2CneyZtgonvceaSs5mSNnZA%3D%3D')","background-color":"var(--bs-primary)"}},Te={class:"container d-flex flex-column align-items-center"},Fe=e("h2",{class:"fw-bold fs-lg-10 fs-1 mb-3 text-white",style:{"font-family":"var(--bs-NotoSerif-TC)"}}," 訂單明細 ",-1),Me={class:"fs-6"},Oe={"aria-label":"breadcrumb"},Ee={class:"breadcrumb mb-0 text-white text-center"},Be={class:"breadcrumb-item"},Re=e("li",{class:"breadcrumb-item active","aria-current":"page"},"訂單明細",-1),$e={class:"container mt-5 mt-md-7 mb-10"},Ie={class:"container"};function Ue(s,o,P,x,r,b){const d=l("routerLink"),n=l("PurchaseSteps"),p=l("CartOrderForm");return c(),m(v,null,[e("div",Ne,[e("div",Te,[Fe,e("div",Me,[e("nav",Oe,[e("ol",Ee,[e("li",Be,[t(d,{class:"text-decoration-none text-white",to:"/"},{default:f(()=>[u("首頁")]),_:1})]),Re])])])])]),e("div",$e,[e("div",Ie,[t(n,{isActive:r.purchaseStepsIsActive},null,8,["isActive"])]),t(p)])],64)}const Ge=w(De,[["render",Ue]]);export{Ge as default};
